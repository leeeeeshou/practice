<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
        <script src="https://cdn.jsdelivr.net/npm/matter-js@0.18.0/build/matter.min.js"></script>

<div class="page">
  
</div>
<div class="matterArea">
 <canvas id="worldCanvas"></canvas>
</div>

  <div class="canva">
  </div>

  <div class="skillBox" id='skillbox1'>
  <div class="skill">Feel at Home</div>
</div>
<div class="skillBox" id='skillbox2'>
  <div class="skill">Service</div>
</div>
<div class="skillBox" id='skillbox3'>
  <div class="skill">Fast Check inn</div>
</div>
<div class="skillBox" id='skillbox4'>
  <div class="skill">Problem solve</div>
</div>
<div class="skillBox" id='skillbox5'>
  <div class="skill">Kind</div>
</div>
<div class="skillBox" id='skillbox6'>
  <div class="skill">Reservation</div>
</div>
<div class="skillBox" id='skillbox7'>
  <div class="skill">Language</div>
</div>
<div class="skillBox" id='skillbox8'>
  <div class="skill">Clean</div>
</div>
<div class="skillBox" id='skillbox9'>
  <div class="skill">Environment</div>
</div>
<div class="skillBox" id='skillbox10'>
  <div class="skill">Amenities</div>
</div>

<div class="title">
  進衛文庫
</div>


<div class="cnava-title">
  <div class="MatterSubContent">123</div>
  <div class='titleHr' id='bottomHr'></div>
  <div class='titleHr' id='leftHr'></div>
  <div class='titleHr' id='rightHr'></div>
  <div class="contentNumner">
    Postitive 15352
  </div>
</div>
</body>
</html>

<style>
*{
  box-sizing:border-box
}
:root{
 --bg--color:#faf7f0;
--text--color:#202225;
}
body{
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-color: var(--bg--color); 
}
.page{
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: -1;
  background:
        linear-gradient(black 1.5px, transparent 0),
        linear-gradient(90deg, black 1.5px, transparent 0);
    background-size: 100% 40px, 40px 100%, 100% 200px, 200px 100%;
  
}
.skillBox{
  padding:0px 1px;
  height: 40px;
  border: 1px solid #000;
  border-radius: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #202225;
  position: absolute;
  pointer-events:none;
}

.skill{
  width: 95%;
  height: 80%;
  border: 2px solid whitesmoke;
  border-radius: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  color:whitesmoke;
  letter-spacing:3px;
  font-size: 1.2rem;
  padding:0px 10px;
  white-space: nowrap;
}



.matterArea{
  border: 1px solid #000;
  position: fixed;
  top: 0;
  left: 0;
}
canvas{
  position: fixed;
  left: 20px;

}

.title{
  width: 319px;
  height: 79px;
  position: absolute;
  left: 209px;
  top: 49px;
  font-size: 2rem;
  background-color: var(--bg--color);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;
}
.cnava-title{
  width: 280px;
  height: 0px;
  background-color: #202225;
  position: fixed;
  top: 120px;
  left: 228px;
  transition:0.5s;
  overflow: hidden;
  z-index: 1;
}
.titleHr{
  position: absolute;
  border: 1px solid var(--bg--color);
}
#bottomHr{
  bottom: 20px;
  width: 100%;
  height: 0;
}
#leftHr{
  top: 0;
  left: 19px;
  width: 0px;
  height: 100%;
}
#rightHr{
  top: 0;
  right: 19px;
  width: 0px;
  height: 100%;
}
.contentNumner{
  position: absolute;
  color:var(--bg--color);
  bottom: 1%;
  left: 50%;
  transform:translatex(-50%);
  letter-spacing:3px;
  width: 100%;
  text-align: center;
  font-weight: 850;
  font-size: 0.8rem;
}
.MatterSubContent{
  position: absolute;
  left: 50%;
  transform:translatex(-50%);
  top: 10%;
  color:var(--bg--color);
  font-size: 1.8rem;
  width: 100%;
  text-align: center;
}
</style>
<script>
const canva = document.querySelector(".canva");
const skillBox = document.querySelectorAll(".skillBox");
const matterArea = document.querySelector(".matterArea");

const engine = Matter.Engine.create();
const world = engine.world;
const canvas = document.getElementById("worldCanvas");

engine.world.gravity.y = 1;
// 創建渲染器
const render = Matter.Render.create({
  element: canvas.parentElement,
  engine: engine,
  options: {
    width: 750,
    height: 580,
    wireframes: false,
    background: "rgba(0, 0, 0, 0)"
  }
});

// 創建靜態地面和牆壁
const ground = Matter.Bodies.rectangle(280, 578, 880, 20, {
  isStatic: true,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const wallleft = Matter.Bodies.rectangle(-10, 360, 20, 730, {
  isStatic: true,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const wallright = Matter.Bodies.rectangle(730, 360, 20, 730, {
  isStatic: true,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});

// 創建動態方塊和圓形

const box = Matter.Bodies.rectangle(400, -400, 150, 40, {
  isStatic: false,
  restitution: 0.9,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box2 = Matter.Bodies.rectangle(120, 280, 90, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});

const box3 = Matter.Bodies.rectangle(180, 280, 165, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box4 = Matter.Bodies.rectangle(180, -1480, 160, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box5 = Matter.Bodies.rectangle(180, -680, 80, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box6 = Matter.Bodies.rectangle(180, -780, 130, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box7 = Matter.Bodies.rectangle(380, 80, 110, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box8 = Matter.Bodies.rectangle(280, -80, 70, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box9 = Matter.Bodies.rectangle(380, -480, 135, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});
const box10 = Matter.Bodies.rectangle(480, -80, 115, 40, {
  isStatic: false,
  restitution: 0.8,
  render: {
    fillStyle: "rgba(0, 0, 0, 0)"
  }
});


/*球*/
const ballsConfig = [
  { x: 100, y: 50, radius: 30 },
  { x: 200, y: 100, radius: 20 },
  { x: 300, y: 150, radius: 40 },
  { x: 400, y: 200, radius: 20 },
  { x: 500, y: 250, radius: 35 },
  { x: 210, y: 250, radius: 15 },
  { x: 460, y: 250, radius: 15 },
  { x: 420, y: 250, radius: 25 },
  { x: 420, y: -650, radius: 35 },
  { x: 120, y: -850, radius: 15 },
  { x: 220, y: -800, radius: 25 },
  { x: 320, y: -750, radius: 25 },
  { x: 420, y: -650, radius: 25 },
  { x: 620, y: -550, radius: 25 },
  { x: 520, y: -150, radius: 25 }
];
const balls = ballsConfig.map((config) => {
  return Matter.Bodies.circle(config.x, config.y, config.radius, {
    isStatic: false,
    restitution: 0.6,
    render: {
      fillStyle: "rgba(62, 64, 67, 1)" // 填充顏色
    }
  });
});
Matter.World.add(world, balls);

// 創建滑鼠約束
const mouse = Matter.Mouse.create(render.canvas);
const mouseConstraint = Matter.MouseConstraint.create(engine, {
  mouse: mouse,
  constraint: {
    stiffness: 0.2, // 約束的剛性
    render: { visible: false } // 隱藏約束線條
  }
});

// 把物體加到世界中
Matter.World.add(world, [
  ground,
  wallleft,
  wallright,
  box,
  box2,
  box3,
  box4,
  box5,
  box6,
  box7,
  box8,
  box9,
  box10,
  mouseConstraint
]);

// 啟動渲染和引擎
Matter.Render.run(render);
Matter.Engine.run(engine);

/*綁定HTML與Mmatter.js*/
const skillbox1 = document.getElementById("skillbox1");
const skillbox2 = document.getElementById("skillbox2");
const skillbox3 = document.getElementById("skillbox3");
const skillbox4 = document.getElementById("skillbox4");
const skillbox5 = document.getElementById("skillbox5");
const skillbox6 = document.getElementById("skillbox6");
const skillbox7 = document.getElementById("skillbox7");
const skillbox8 = document.getElementById("skillbox8");
const skillbox9 = document.getElementById("skillbox9");
const skillbox10 = document.getElementById("skillbox10");


function updateImagePositionForBox() {
  const boxPosition = box.position;
  const box2Position = box2.position;
  const box3Position = box3.position;
  const box4Position = box4.position;
  const box5Position = box5.position;
  const box6Position = box6.position;
  const box7Position = box7.position;
  const box8Position = box8.position;
  const box9Position = box9.position;
  const box10Position = box10.position;

  const canvasRect = render.canvas.getBoundingClientRect();

  const x = boxPosition.x + canvasRect.left;
  const y = boxPosition.y + canvasRect.top;
  const x2 = box2Position.x + canvasRect.left;
  const y2 = box2Position.y + canvasRect.top;
  const x3 = box3Position.x + canvasRect.left;
  const y3 = box3Position.y + canvasRect.top;
  const x4 = box4Position.x + canvasRect.left;
  const y4 = box4Position.y + canvasRect.top;
  const x5 = box5Position.x + canvasRect.left;
  const y5 = box5Position.y + canvasRect.top;
  const x6 = box6Position.x + canvasRect.left;
  const y6 = box6Position.y + canvasRect.top;
  const x7 = box7Position.x + canvasRect.left;
  const y7 = box7Position.y + canvasRect.top;
  const x8 = box8Position.x + canvasRect.left;
  const y8 = box8Position.y + canvasRect.top;
  const x9 = box9Position.x + canvasRect.left;
  const y9 = box9Position.y + canvasRect.top;
  const x10 = box10Position.x + canvasRect.left;
  const y10 = box10Position.y + canvasRect.top;
  

  const rotation = box.angle * (180 / Math.PI);
  const rotation2 = box2.angle * (180 / Math.PI);
  const rotation3 = box3.angle * (180 / Math.PI);
  const rotation4 = box4.angle * (180 / Math.PI);
  const rotation5 = box5.angle * (180 / Math.PI);
  const rotation6 = box6.angle * (180 / Math.PI);
  const rotation7 = box7.angle * (180 / Math.PI);
  const rotation8 = box8.angle * (180 / Math.PI);
  const rotation9 = box9.angle * (180 / Math.PI);
  const rotation10 = box10.angle * (180 / Math.PI);

  // 設定 元素 的位置
  skillbox1.style.left = `${x - 90}px`;
  skillbox1.style.top = `${y - 20}px`;
  skillbox1.style.transform = `rotate(${rotation}deg)`; // 使用 transform 設置旋轉角度

  skillbox2.style.left = `${x2 - 60}px`;
  skillbox2.style.top = `${y2 - 20}px`;
  skillbox2.style.transform = `rotate(${rotation2}deg)`;

  skillbox3.style.left = `${x3 - 90}px`;
  skillbox3.style.top = `${y3 - 25}px`;
  skillbox3.style.transform = `rotate(${rotation3}deg)`;

  skillbox4.style.left = `${x4 - 90}px`;
  skillbox4.style.top = `${y4 - 20}px`;
  skillbox4.style.transform = `rotate(${rotation4}deg)`;
  
  skillbox5.style.left = `${x5 - 40}px`;
  skillbox5.style.top = `${y5 - 20}px`;
  skillbox5.style.transform = `rotate(${rotation5}deg)`;
  
  skillbox6.style.left = `${x6 - 80}px`;
  skillbox6.style.top = `${y6 - 20}px`;
  skillbox6.style.transform = `rotate(${rotation6}deg)`;
  
  skillbox7.style.left = `${x7 - 65}px`;
  skillbox7.style.top = `${y7 - 20}px`;
  skillbox7.style.transform = `rotate(${rotation7}deg)`;
  
  skillbox8.style.left = `${x8 - 45}px`;
  skillbox8.style.top = `${y8 - 20}px`;
  skillbox8.style.transform = `rotate(${rotation8}deg)`;
  
  skillbox9.style.left = `${x9 - 80}px`;
  skillbox9.style.top = `${y9 - 20}px`;
  skillbox9.style.transform = `rotate(${rotation9}deg)`;
  
  skillbox10.style.left = `${x10 - 70}px`;
  skillbox10.style.top = `${y10 - 30}px`;
  skillbox10.style.transform = `rotate(${rotation10}deg)`;
}
Matter.Events.on(engine, "afterUpdate", function () {
  updateImagePositionForBox();
});

/*重新設定物體掉落*//*
const reStartMatterItem = () => {
  Matter.Body.setPosition(box, { x: 400, y: 0 });
  Matter.Body.setVelocity(box, { x: 0, y: 0 });
  Matter.Body.setPosition(box2, { x: 100, y: 0 });
  Matter.Body.setVelocity(box2, { x: 0, y: 0 });
  Matter.Body.setPosition(box3, { x: 200, y: 0 });
  Matter.Body.setVelocity(box3, { x: 0, y: 0 });
  Matter.Body.setPosition(box4, { x: 450, y: 0 });
  Matter.Body.setVelocity(box4, { x: 0, y: 0 });
  Matter.Body.setPosition(box5, { x: 450, y: 0 });
  Matter.Body.setVelocity(box5, { x: 0, y: 0 });
  Matter.Body.setPosition(box6, { x: 650, y: 0 });
  Matter.Body.setVelocity(box6, { x: 0, y: 0 });
};

/*資料設定*/


const feedbackContent = [
  {
    feedback: "員工親切",
    type: "Positive",
    number: "894"
  },
  {
    feedback: "服務周到",
    type: "Positive",
    number: "847"
  },
  {
    feedback: "快速入住",
    type: "Positive",
    number: "903"
  },
  {
    feedback: "問題解決迅速",
    type: "Positive",
    number: "871"
  },
  {
    feedback: "賓至如歸",
    type: "Positive",
    number: "901"
  },
  {
    feedback: "可協助預約餐廳",
    type: "Positive",
    number: "911"
  },
  {
    feedback: "英日語可溝通",
    type: "Positive",
    number: "918"
  },
  {
    feedback: "一塵不染",
    type: "Positive",
    number: "291"
  },
  {
    feedback: "環境舒適",
    type: "Positive",
    number: "318"
  },
  {
    feedback: "備品齊全",
    type: "Positive",
    number: "283"
  },
  {
    feedback: "床單乾淨",
    type: "Positive",
    number: "237"
  },
  {
    feedback: "睡眠舒適",
    type: "Positive",
    number: "318"
  },
  {
    feedback: "空間大",
    type: "Positive",
    number: "300"
  },
  {
    feedback: "房內設備高級",
    type: "Positive",
    number: "283"
  },
  {
    feedback: "景色好",
    type: "Positive",
    number: "307"
  },
  {
    feedback: "CP值高",
    type: "Positive",
    number: "250"
  },
  {
    feedback: "價格合理",
    type: "Positive",
    number: "243"
  },
  {
    feedback: "免費WIFI",
    type: "Positive",
    number: "231"
  },
  {
    feedback: "地段方便",
    type: "Positive",
    number: "256"
  },
  {
    feedback: "早餐好吃",
    type: "Positive",
    number: "242"
  },
  {
    feedback: "免費休息室",
    type: "Positive",
    number: "252"
  },
  {
    feedback: "幼兒友善",
    type: "Positive",
    number: "239"
  },
  {
    feedback: "等候太久",
    type: "Negative",
    number: "200"
  },
  {
    feedback: "員工冷漠",
    type: "Negative",
    number: "205"
  },
  {
    feedback: "效率低落",
    type: "Negative",
    number: "201"
  },
  {
    feedback: "感受不佳",
    type: "Negative",
    number: "237"
  },
  {
    feedback: "明顯經驗不足",
    type: "Negative",
    number: "207"
  },
  {
    feedback: "電話打不通",
    type: "Negative",
    number: "223"
  },
  {
    feedback: "需額外收費",
    type: "Negative",
    number: "178"
  },
  {
    feedback: "房間有異味",
    type: "Negative",
    number: "286"
  },
  {
    feedback: "床單不乾淨",
    type: "Negative",
    number: "293"
  },
  {
    feedback: "廁所髒亂",
    type: "Negative",
    number: "306"
  },
  {
    feedback: "灰塵很多",
    type: "Negative",
    number: "288"
  },
  {
    feedback: "隔音不好",
    type: "Negative",
    number: "285"
  },
  {
    feedback: "毛髮殘留",
    type: "Negative",
    number: "298"
  },
  {
    feedback: "沒有提供免費備品",
    type: "Negative",
    number: "342"
  },
  {
    feedback: "房間狹小",
    type: "Negative",
    number: "307"
  },
  {
    feedback: "枕頭太軟",
    type: "Negative",
    number: "306"
  },
  {
    feedback: "CP值低",
    type: "Negative",
    number: "349"
  },
  {
    feedback: "設施陳舊",
    type: "Negative",
    number: "349"
  },
  {
    feedback: "冷氣不冷",
    type: "Negative",
    number: "298"
  },
  {
    feedback: "停車位置太少",
    type: "Negative",
    number: "365"
  },
  {
    feedback: "位置難找",
    type: "Negative",
    number: "350"
  },
  {
    feedback: "跟廣告有落差",
    type: "Negative",
    number: "343"
  }
]









/*設定物件開關*/
const matterSubtitle=document.querySelector('.cnava-title')

const MatterSubContent=document.querySelector('.MatterSubContent')

const contentNumner=document.querySelector('.contentNumner')

const openMatterSubtitle=(text,attitude,number)=>{
  matterSubtitle.style.height='70px'
  MatterSubContent.innerText=text
  contentNumner.innerText=attitude +"  "+number
}

const closeMatterSubtitle=(text)=>{
  matterSubtitle.style.height='0px'
}

Matter.Events.on(mouseConstraint, 'mousedown', function(event) {
  const mousePosition = event.mouse.position;
  
  if (Matter.Bounds.contains(box.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[4].feedback,feedbackContent[4].type,feedbackContent[4].number);  
  }
    if (Matter.Bounds.contains(box2.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[1].feedback,feedbackContent[1].type,feedbackContent[1].number);  
  }
  if
  (Matter.Bounds.contains(box3.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[2].feedback,feedbackContent[2].type,feedbackContent[2].number);  
  }
  if
  (Matter.Bounds.contains(box4.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[3].feedback,feedbackContent[3].type,feedbackContent[3].number);  
  }
    if
  (Matter.Bounds.contains(box5.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[0].feedback,feedbackContent[0].type,feedbackContent[0].number);  
  }
   if
  (Matter.Bounds.contains(box6.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[5].feedback,feedbackContent[5].type,feedbackContent[5].number);  
  }
  if
  (Matter.Bounds.contains(box7.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[6].feedback,feedbackContent[6].type,feedbackContent[6].number);  
  }
  if
  (Matter.Bounds.contains(box8.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[7].feedback,feedbackContent[7].type,feedbackContent[7].number);  
  }
  if
  (Matter.Bounds.contains(box9.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[8].feedback,feedbackContent[8].type,feedbackContent[8].number);  
  }
  if
  (Matter.Bounds.contains(box10.bounds, mousePosition)) { openMatterSubtitle(feedbackContent[9].feedback,feedbackContent[9].type,feedbackContent[9].number);  
  }
  
});

Matter.Events.on(mouseConstraint, 'mouseup', function(event) {
  closeMatterSubtitle()
  }
);
</script>